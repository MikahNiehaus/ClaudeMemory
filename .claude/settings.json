{
  "permissions": {
    "allow": [
      "Read",
      "Write",
      "Edit",
      "Glob",
      "Grep",
      "Task",
      "TodoWrite",
      "NotebookEdit",
      "WebSearch",
      "WebFetch",
      "AskUserQuestion",
      "Bash(npm:*)",
      "Bash(npx:*)",
      "Bash(node:*)",
      "Bash(python:*)",
      "Bash(pip:*)",
      "Bash(pytest:*)",
      "Bash(jest:*)",
      "Bash(vitest:*)",
      "Bash(tsc:*)",
      "Bash(eslint:*)",
      "Bash(prettier:*)",
      "Bash(cargo:*)",
      "Bash(go:*)",
      "Bash(dotnet:*)",
      "Bash(mvn:*)",
      "Bash(gradle:*)",
      "Bash(make:*)",
      "Bash(cmake:*)",
      "Bash(ls:*)",
      "Bash(pwd)",
      "Bash(cd:*)",
      "Bash(mkdir:*)",
      "Bash(cp:*)",
      "Bash(mv:*)",
      "Bash(touch:*)",
      "Bash(chmod:*)",
      "Bash(wc:*)",
      "Bash(sort:*)",
      "Bash(uniq:*)",
      "Bash(diff:*)",
      "Bash(git status)",
      "Bash(git status:*)",
      "Bash(git diff)",
      "Bash(git diff:*)",
      "Bash(git log)",
      "Bash(git log:*)",
      "Bash(git show:*)",
      "Bash(git blame:*)",
      "Bash(git rev-parse:*)",
      "Bash(git branch)",
      "Bash(git branch -a)",
      "Bash(git branch -r)",
      "Bash(git branch -v)",
      "Bash(git branch --list:*)",
      "Bash(git remote -v)",
      "Bash(git remote show:*)",
      "Bash(git tag)",
      "Bash(git tag -l:*)",
      "Bash(git ls-files:*)",
      "Bash(git ls-tree:*)",
      "Bash(git shortlog:*)",
      "Bash(git describe:*)",
      "Bash(git config --list)",
      "Bash(git config --get:*)",
      "Bash(gh issue:*)",
      "Bash(gh pr list:*)",
      "Bash(gh pr view:*)",
      "Bash(gh pr status)",
      "Bash(gh pr checks:*)",
      "Bash(gh repo view:*)",
      "Bash(docker ps:*)",
      "Bash(docker images:*)",
      "Bash(docker logs:*)",
      "Bash(docker inspect:*)",
      "Bash(which:*)",
      "Bash(where:*)",
      "Bash(type:*)",
      "Bash(env)",
      "Bash(printenv:*)",
      "Bash(date:*)",
      "Bash(whoami)",
      "Bash(hostname)",
      "Bash(git commit:*)",
      "Bash(git commit)",
      "Bash(git pull:*)",
      "Bash(git pull)",
      "Bash(git fetch:*)",
      "Bash(git fetch)",
      "Bash(git checkout:*)",
      "Bash(git checkout)",
      "Bash(git switch:*)",
      "Bash(git switch)",
      "Bash(git stash:*)",
      "Bash(git stash)",
      "Bash(git branch -d:*)",
      "Bash(git branch -m:*)",
      "Bash(git branch -c:*)",
      "Bash(git branch --copy:*)",
      "Bash(git merge:*)",
      "Bash(git merge)",
      "Bash(git rebase:*)",
      "Bash(git rebase)",
      "Bash(git cherry-pick:*)",
      "Bash(git cherry-pick)",
      "Bash(git tag -a:*)",
      "Bash(git rm:*)",
      "Bash(git mv:*)",
      "Bash(git apply:*)",
      "Bash(git am:*)",
      "Bash(git worktree:*)",
      "Bash(gh pr create:*)",
      "Bash(gh pr edit:*)",
      "Bash(gh issue create:*)",
      "Bash(gh issue edit:*)",
      "Bash(claude mcp:*)",
      "mcp__playwright_browser_click",
      "mcp__playwright_browser_type",
      "mcp__playwright_browser_snapshot",
      "mcp__playwright_browser_take_screenshot",
      "mcp__playwright_browser_go_back",
      "mcp__playwright_browser_go_forward",
      "mcp__playwright_browser_select_option",
      "mcp__playwright_browser_hover",
      "mcp__playwright_browser_drag",
      "mcp__playwright_browser_press_key",
      "mcp__playwright_browser_scroll",
      "mcp__playwright_browser_wait",
      "mcp__playwright_browser_close",
      "mcp__playwright_browser_resize",
      "mcp__playwright_browser_file_upload",
      "mcp__playwright_browser_handle_dialog"
    ],
    "ask": [
      "mcp__playwright_browser_navigate",
      "Bash(rm:*)",
      "Bash(rmdir:*)",
      "Bash(git reset:*)",
      "Bash(git reset)",
      "Bash(git revert:*)",
      "Bash(git revert)",
      "Bash(git clean:*)",
      "Bash(git clean)",
      "Bash(git restore:*)",
      "Bash(git restore)",
      "Bash(git branch -D:*)",
      "Bash(git branch --delete:*)",
      "Bash(git branch -M:*)",
      "Bash(git branch --move:*)",
      "Bash(git tag -d:*)",
      "Bash(git tag --delete:*)",
      "Bash(git remote add:*)",
      "Bash(git remote remove:*)",
      "Bash(git remote rename:*)",
      "Bash(git remote set-url:*)",
      "Bash(git config --global:*)",
      "Bash(git config --system:*)",
      "Bash(git config --local:*)",
      "Bash(git config --unset:*)",
      "Bash(git init:*)",
      "Bash(git init)",
      "Bash(git clone:*)",
      "Bash(git clone)",
      "Bash(git submodule:*)",
      "Bash(git filter-branch:*)",
      "Bash(git reflog expire:*)",
      "Bash(git gc:*)",
      "Bash(git prune:*)",
      "Bash(git format-patch:*)",
      "Bash(git bisect:*)",
      "Bash(git add:*)",
      "Bash(git add)",
      "Bash(git push:*)",
      "Bash(git push)",
      "Bash(git push --force:*)",
      "Bash(git push -f:*)",
      "Bash(gh pr merge:*)",
      "Bash(gh pr close:*)",
      "Bash(gh issue close:*)",
      "Bash(gh repo create:*)",
      "Bash(gh release:*)",
      "Bash(sudo:*)",
      "Bash(curl:*)",
      "Bash(wget:*)",
      "Read(./.env)",
      "Read(./.env.*)",
      "Read(./.env.local)",
      "Read(./.env.production)",
      "Read(./secrets/**)",
      "Read(./**/secrets/**)",
      "Read(./**/*.pem)",
      "Read(./**/*.key)",
      "Read(./**/credentials*)",
      "Read(./**/*_secret*)",
      "Read(./**/*_token*)",
      "Read(~/.ssh/**)",
      "Read(~/.aws/**)",
      "Read(~/.config/gcloud/**)",
      "Write(./.env)",
      "Write(./.env.*)",
      "Write(./secrets/**)",
      "Edit(./.env)",
      "Edit(./.env.*)",
      "Edit(./secrets/**)"
    ],
    "deny": [
      "Bash(rm -rf /)",
      "Bash(rm -rf /*)",
      "Bash(rm -rf ~)",
      "Bash(rm -rf ~/*)",
      "Bash(mkfs:*)",
      "Bash(dd if=/dev/zero:*)",
      "Bash(dd if=/dev/random:*)",
      "Bash(format c:*)",
      "Bash(psql -c DROP:*)",
      "Bash(psql -c TRUNCATE:*)",
      "Bash(mysql -e DROP:*)",
      "Bash(mysql -e TRUNCATE:*)",
      "Bash(mongosh --eval db.dropDatabase:*)",
      "Bash(redis-cli FLUSHALL)",
      "Bash(redis-cli FLUSHDB)",
      "Bash(shutdown:*)",
      "Bash(reboot:*)",
      "Bash(init 0)",
      "Bash(init 6)",
      "Bash(halt)",
      "Bash(poweroff)",
      "Bash(chmod 777:*)",
      "Bash(chmod -R 777:*)",
      "Bash(gh repo delete:*)",
      "Bash(dd of=/dev/sd:*)",
      "Bash(mv /etc:*)",
      "Bash(mv /usr:*)",
      "Bash(mv /bin:*)",
      "Bash(mv /var:*)"
    ],
    "additionalDirectories": []
  },
  "sandbox": {
    "enabled": true,
    "autoAllowBashIfSandboxed": true,
    "excludedCommands": ["docker", "git"],
    "network": {
      "allowLocalBinding": true
    }
  },
  "includeCoAuthoredBy": true,
  "hooks": {
    "SessionStart": [
      {
        "matcher": "Always",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "SESSION INITIALIZATION:\n\n1. Read MEMORY.md for system registry\n2. List workspace/ folders to find active tasks\n3. For each task folder, read context.md and check:\n   - Status (PLANNING/ACTIVE/BLOCKED/COMPLETE)\n   - Execution Mode (NORMAL/PERSISTENT)\n   - Completion Criteria (if PERSISTENT mode)\n\n4. For PERSISTENT mode tasks that are ACTIVE:\n   - Run completion criteria verification commands\n   - If criteria NOT met: AUTO-CONTINUE without asking user\n   - Resume from documented 'Next Item' in Progress Tracker\n\n5. For NORMAL mode or non-PERSISTENT tasks:\n   - Summarize status and ask user how to proceed\n\n6. Remind: CLAUDE.md contains orchestrator rules (machine-readable format)\n\nCRITICAL: PERSISTENT mode means continue automatically until done.",
            "statusMessage": "Loading session state...",
            "timeout": 30
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "matcher": "auto",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "COMPACTION PREPARATION:\n\nBefore context is compacted, preserve critical state for each active task:\n\n1. Update context.md with:\n   - Current Status\n   - Execution Mode (NORMAL/PERSISTENT)\n   - For PERSISTENT mode:\n     * Completion Criteria table with current status\n     * Progress Tracker (items completed/total)\n     * Last Item Processed\n     * Next Item to process\n   - Next Steps (explicit actions to resume)\n   - Key Findings\n\n2. Update Quick Resume section:\n   - NORMAL mode: '[agent] completed [task]. Next: [action]'\n   - PERSISTENT mode: '**MODE: PERSISTENT** | Progress: M/N | Next: [item] | Criteria: [status]'\n\n3. Include in compaction summary:\n   - Active task IDs\n   - Mode for each task\n   - For PERSISTENT: criteria status, items remaining\n   - Blocking issues\n\nCRITICAL: PERSISTENT mode tasks must resume automatically after compaction.",
            "statusMessage": "Preparing for compaction...",
            "timeout": 45
          }
        ]
      }
    ]
  }
}

